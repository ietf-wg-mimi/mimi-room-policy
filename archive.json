{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2025-07-10T01:52:54.109910+00:00",
  "repo": "ietf-wg-mimi/mimi-room-policy",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 1,
      "id": "I_kwDOMS7nYM6j1Hu5",
      "title": "Create authorization policy knobs for edit/delete of messages",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/1",
      "state": "CLOSED",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Make sure there are policy knobs that cover the scenarios discussed in MIMI content issues [#24](https://github.com/ietf-wg-mimi/draft-ietf-mimi-content/issues/24) and [#25](https://github.com/ietf-wg-mimi/draft-ietf-mimi-content/issues/25).",
      "createdAt": "2024-12-18T19:36:46Z",
      "updatedAt": "2025-02-25T01:00:47Z",
      "closedAt": "2025-02-25T01:00:45Z",
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "Updates in draft-mahy-mimi-app-components have these capabilties. They will migrate into draft-ietf-mimi-room-policy in time for IETF122 (Bangkok)",
          "createdAt": "2025-01-13T16:07:42Z",
          "updatedAt": "2025-01-13T16:07:42Z"
        },
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "This was addressed in merge of PR #7 of the capabilities from draft-mahy-mimi-app-components.",
          "createdAt": "2025-02-25T01:00:45Z",
          "updatedAt": "2025-02-25T01:00:45Z"
        }
      ]
    },
    {
      "number": 2,
      "id": "I_kwDOMS7nYM6lTH-P",
      "title": "Role is defined multiple times",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/2",
      "state": "CLOSED",
      "author": "timokoesters",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "If it is intended to define two roles, one name should be changed.\r\nOr is the first role definition outdated? Then the draft should be rewritten to only use the second definition.\r\n\r\nhttps://github.com/ietf-wg-mimi/mimi-room-policy/blob/36f8b7c5dc372862321c84b7c7e51997475e227a/draft-ietf-mimi-room-policy.md?plain=1#L204-L213\r\n\r\nhttps://github.com/ietf-wg-mimi/mimi-room-policy/blob/36f8b7c5dc372862321c84b7c7e51997475e227a/draft-ietf-mimi-room-policy.md?plain=1#L368-L377",
      "createdAt": "2025-01-07T16:24:21Z",
      "updatedAt": "2025-02-25T00:59:36Z",
      "closedAt": "2025-02-25T00:59:35Z",
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "This is now fixed with PR #7 ",
          "createdAt": "2025-02-25T00:59:35Z",
          "updatedAt": "2025-02-25T00:59:35Z"
        }
      ]
    },
    {
      "number": 3,
      "id": "I_kwDOMS7nYM6oBPEW",
      "title": "What are the semantics of kick?",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/3",
      "state": "OPEN",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "1. remove all clients, user stays in participant list\n2. remove all clients and remove user from paritcipant list but don't ban",
      "createdAt": "2025-01-29T18:07:17Z",
      "updatedAt": "2025-01-29T19:05:47Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 4,
      "id": "I_kwDOMS7nYM6oBs5O",
      "title": "do we need to be able to support multi domain \"tree\" of roles?",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/4",
      "state": "CLOSED",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Alice invites Bob and Cathy from different orgs/domains:\n\n- Alice can add and remove participants from any org\n- Adam can add and remove participants from within Adam's org\n- Bob can add and remove participants from within Bob's org\n- Cathy can add and remove participants from within Cathy's org\n \nIn the model where there is a single role per user this could be modeled with separate roles:\n- room_admin\n- a.example_admin\n- b.example_admin\n- c.example_admin\n\nIn a multiple role per user model, this could be modeled if the role hierarchy was a tree\n\n",
      "createdAt": "2025-01-29T19:05:09Z",
      "updatedAt": "2025-02-25T00:58:32Z",
      "closedAt": "2025-02-25T00:58:31Z",
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "This is now included in example A.4",
          "createdAt": "2025-02-25T00:58:31Z",
          "updatedAt": "2025-02-25T00:58:31Z"
        }
      ]
    },
    {
      "number": 5,
      "id": "I_kwDOMS7nYM6oBv4l",
      "title": "Requirements and information associated with bans?",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/5",
      "state": "OPEN",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Timo suggests:\n- Time the ban expires (if ever)\n- who initiated the ban\n- the reason for the ban\n\noptionally the (list of) old role(s) could be stored.\n\nThis may be different from a suspension that allows a user to still view messages, or something similar.\n\n",
      "createdAt": "2025-01-29T19:09:53Z",
      "updatedAt": "2025-01-29T19:09:53Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 6,
      "id": "I_kwDOMS7nYM6oBwLO",
      "title": "Note that subrooms are on the same hub as the parent room",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/6",
      "state": "OPEN",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2025-01-29T19:10:31Z",
      "updatedAt": "2025-01-29T19:10:31Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 8,
      "id": "I_kwDOMS7nYM6uNcSF",
      "title": "Download and link policies",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/8",
      "state": "OPEN",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "For \"assets\" (images, videos, sounds), the room policy should include an \"asset\" domain per provider domain where those assets can be stored.\nPresumably clients would also upload its assets to this same domain.\nI consider endpoints for and how to discover credentials necessary for uploading assets out-of-scope of the MIMI protocol and MIMI room policy documents, but could be added as a standalone separate document.\n\nFor links, the room policy should include a setting about whether links are displayed as hyperlinks, and if link previews are automatically generated. ",
      "createdAt": "2025-03-16T04:18:55Z",
      "updatedAt": "2025-03-16T07:06:15Z",
      "closedAt": null,
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "See [mimi-protocol PR #111](https://github.com/ietf-wg-mimi/mimi-protocol/pull/111)",
          "createdAt": "2025-03-16T07:06:14Z",
          "updatedAt": "2025-03-16T07:06:14Z"
        }
      ]
    },
    {
      "number": 9,
      "id": "I_kwDOMS7nYM6yzBW8",
      "title": "Is canAddParticipant redundant?",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/9",
      "state": "OPEN",
      "author": "timokoesters",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "Is an explicit capability for adding participants needed? Does an entry in the authorized_role_changes not imply that the user has the capability?\n\nhttps://github.com/ietf-wg-mimi/mimi-room-policy/blob/2c9537ddf168dc586248dad58a39864af0e6fced/versioned/draft-ietf-mimi-room-policy-01.txt#L738-L751",
      "createdAt": "2025-04-16T13:47:18Z",
      "updatedAt": "2025-04-16T13:47:18Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 10,
      "id": "I_kwDOMS7nYM62jiD4",
      "title": "Add self_role_changes array for own-role transitions",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/issues/10",
      "state": "OPEN",
      "author": "timokoesters",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "https://github.com/ietf-wg-mimi/mimi-room-policy/blob/2c9537ddf168dc586248dad58a39864af0e6fced/versioned/draft-ietf-mimi-room-policy-01.txt#L291\n\nauthorized_role_changes is the list of role transitions that the user can trigger on any user, including themselves. But some transitions that a user can do to themselves, should not be possible to use on other users. An example:\n\nThe room has two roles:\n0: Outsider\n1: Regular user\n\nAnd authorized_role_changes for role 1 is [(0, [1]), (1, [0])]\n\nThe transition 0 -> 1 corresponds to inviting a user and the transition 1 -> 0 corresponds to leaving the room or kicking another user.\n\nI think the idea of this draft is, that the difference between leaving a room and kicking will be defined using additional capabilities, like canRemoveParticipant. However, this only works for a few predefined roles and not custom roles. For example, there is no canDemoteModerator or canDemoteAdmin.\n\nI suggest that instead of solving this with capabilities, we instead add a new array self_role_changes alongside the existing authorized_role_changes.\n- authorized_role_changes are the set of transitions, the user can trigger for any user, including themselves.\n- self_role_changes are the set of transitions the user can additionally trigger on themselves\n\nTo allow leaving, but deny kicking in the example above, the arrays for role 1 would look like this:\nauthorized_role_changes = [(0, [1])] // Allow inviting users\nself_role_changes = [0] // Allow transitioning to outsider",
      "createdAt": "2025-05-14T11:20:26Z",
      "updatedAt": "2025-07-08T16:28:13Z",
      "closedAt": null,
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "I'm not sure I see the problem. Currently you determine which capability is needed, and then check the authorized_role_changes to make sure any role transition is allowed, and any role constraints are allowed (check both old role and new role). Does something not work right now?\n\nthanks,\n-rohan",
          "createdAt": "2025-07-08T15:48:43Z",
          "updatedAt": "2025-07-08T15:48:43Z"
        },
        {
          "author": "timokoesters",
          "authorAssociation": "NONE",
          "body": "The problem is that the same table is checked for canChangeUserRole and canChangeOwnRole.\n\nI want to describe a room policy where\n1. Admins can make regular users admins\n2. Admins can demote themselves\n3. Admins cannot demote other admins.\n\nThis leads to the following policy:\n\n1. Admins have canChangeUserRole and the transition regular->admin\n2. Admins have canChangeOwnRole and the transition admin->regular\n\nBut this would violate the third requirement, because admins have canChangeUserRole and the transition admin->regular",
          "createdAt": "2025-07-08T16:28:13Z",
          "updatedAt": "2025-07-08T16:28:13Z"
        }
      ]
    }
  ],
  "pulls": [
    {
      "number": 7,
      "id": "PR_kwDOMS7nYM6K36iU",
      "title": "Move content from app-components and align",
      "url": "https://github.com/ietf-wg-mimi/mimi-room-policy/pull/7",
      "state": "MERGED",
      "author": "rohanmahy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "Removed RBAC and Preauth and replaced with content from app-components\r\nAdded copious examples\r\nRemoved policies that are no longer needed with a powerful RBAC system.",
      "createdAt": "2025-02-11T22:43:31Z",
      "updatedAt": "2025-03-03T03:36:26Z",
      "baseRepository": "ietf-wg-mimi/mimi-room-policy",
      "baseRefName": "main",
      "baseRefOid": "47c34a839796d5e37aaf42c60cf26ba5640286a9",
      "headRepository": "ietf-wg-mimi/mimi-room-policy",
      "headRefName": "app-comps",
      "headRefOid": "4e5a56ebe3685d5dcde259e44ee30ac01638b3d4",
      "closedAt": "2025-02-25T00:54:04Z",
      "mergedAt": "2025-02-25T00:54:04Z",
      "mergedBy": "rohanmahy",
      "mergeCommit": {
        "oid": "bb5e1b0f0e6bc84fdc0ca84d53f57a450ac92b52"
      },
      "comments": [
        {
          "author": "rohanmahy",
          "authorAssociation": "COLLABORATOR",
          "body": "After discussing this content at several interim meetings now, I think it is ready to merge.",
          "createdAt": "2025-02-25T00:53:59Z",
          "updatedAt": "2025-02-25T00:53:59Z"
        }
      ],
      "reviews": []
    }
  ]
}